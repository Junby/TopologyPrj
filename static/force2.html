<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<script src="/TopologyPrj/js/jquery-3.1.0.min.js"></script>
<script src="/TopologyPrj/js/d3.js"></script>
<body>
<style>
    .canvas{
        /*width:700px;*/
        /*height:500px;*/
        border:1px solid gray;
        border-radius:5px;
        position:relative;
        margin:20px;
    }
</style>
<script>
    $(function(){
        var t = new Topology(700,500);
        t.addTopRect();
        t.addTopNode();
        t.addNetworkNode();
    });

    /**
     *
     * @param width
     * @param height
     */
    function Topology(width,height){
        this.width = width;
        this.height = height;
        this.svg = d3.select("body").append("svg").attr("width",width).attr("height",height).attr("class","canvas");

    }

    Topology.prototype.addTopRect = function(trWidth,trHeight,padding){
        if(trWidth == null || trWidth == ""){
            trWidth = this.width;
        }
        if(trHeight == null || trHeight == ""){
            trHeight = this.height / 100;
        }
        if(padding == null || padding == ""){
            padding = this.height / 5;
        }
        this.topPadding = padding;
        this.createTopRect(0,padding,trWidth,trHeight,"#59cbdb");
    }

    Topology.prototype.createTopRect = function(x,y,width,height,color){
        this.svg.append("rect").attr("x",x).attr("y",y).attr("width",width).attr("height",height).attr("fill",color);
    }

    /**
     *
     * @param tnWidth
     * @param tnHeight
     * @param tnLink
     */
    Topology.prototype.addTopNode = function(tnWidth,tnHeight,tnLink){
        if(tnWidth == null || tnWidth == ""){
            tnWidth = this.width / 5;
        }
        if(tnHeight == null || tnHeight == ""){
            tnHeight = tnWidth / 2;
        }
        if(tnLink == null || tnLink == ""){
            tnLink = "https://console.ustack.com/static/modules/instance/i/icon-public-network.png";
        }
        var x = this.width / 2 - tnWidth / 2;
        var y = this.topPadding -tnHeight;
        this.createImage(x,y,tnWidth,tnHeight,tnLink);
    }

    Topology.prototype.createImage = function (x,y,width,height,link){
        this.svg.append("image").attr("x",x).attr("y",y).attr("width",width).attr("height",height).attr("xlink:href",link);
    }

    Topology.prototype.addNetworkNode = function(width,height,link,num){
        if(width == null || width == ""){
            width = this.width / 6;
        }
        if(height == null || height == ""){
            height = width / 2;
        }
        if(link == null || link == ""){
            link = "https://console.ustack.com/static/modules/instance/i/icon-network.png";
        }

//        if(num == null || num == ""){
//            alert("xxxxx");
//            return;
//        }

        var x = this.width / 2 - width / 2;
        var y = this.topPadding + 50;
        this.createNetworkRect(x,y,width,height,"transparent");
    }



    Topology.prototype.createNetworkRect = function(x,y,width,height,color){
        this.svg.append("rect").attr("x",x).attr("y",y).attr("width",width).attr("height",height).attr("fill",color)
                .attr("rx",2).attr("ry",2).attr("stroke","#d5dee2");
    }

    Topology.prototype.addLink = function(){

    }

</script>
</body>
</html>