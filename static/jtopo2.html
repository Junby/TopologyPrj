<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<script src="/TopologyPrj/js/jquery-3.1.0.min.js"></script>
<script src="/TopologyPrj/js/jtopo-0.4.8-min.js"></script>
<script src="/TopologyPrj/js/toolbar.js"></script>
<body>
<canvas id="canvas" dragable="false"></canvas>
</body>
<script>
    $(document).ready(function(){
        var canvas = document.getElementById('canvas');
        canvas.width = 700;
        canvas.height = 500;
        var stage = new JTopo.Stage(canvas);
        //显示工具栏
//        showJTopoToobar(stage);

        var scene = new JTopo.Scene(stage);
//        scene.background = './img/bg.jpg';

        function node(x, y, img, msg){
            var node = new JTopo.Node(msg);
            node.setImage(img, true);
            node.setLocation(x, y);
            node.setSize(50,50);
            node.fontColor = "black";
            node.dragable = "false";
//            node.setBound(x,y,50,50);
            scene.add(node);
            return node;
        }

        function linkNode(nodeA, nodeZ, f){
            var link;
            if(f){
                link = new JTopo.FoldLink(nodeA, nodeZ);
            }else{
                link = new JTopo.Link(nodeA, nodeZ);
            }
          
            link.direction = 'vertical';
//            link.style.strokeColor = "#d5dee2";
            scene.add(link);
            return link;
        }

        function hostLink(nodeA, nodeZ){
            var link = new JTopo.FlexionalLink(nodeA, nodeZ);
            link.shadow = false;
            link.offsetGap = 44;
            scene.add(link);
            return link;
        }

        // 二次折线
        function newFlexionalLink(nodeA, nodeZ, text, direction, dashedPattern){
            var link = new JTopo.FlexionalLink(nodeA, nodeZ, text);
            link.direction = direction || 'horizontal';
            link.arrowsRadius = 10;
            link.lineWidth = 2; // 线宽
            link.offsetGap = 25;
            link.bundleGap = 15; // 线条之间的间隔
            link.textOffsetY = 10; // 文本偏移量（向下15个像素）
//            link.fontcolor();
//            link.strokeColor = '0,250,0';
//            link.dashedPattern = dashedPattern;
            scene.add(link);
            return link;
        }


        var net1 = node(230, 50, 'https://console.ustack.com/static/modules/instance/i/icon-network.png', 'net1');
        var net2 = node(360, 50, 'https://console.ustack.com/static/modules/instance/i/icon-network.png', 'net2');
        var net3 = node(490, 50, 'https://console.ustack.com/static/modules/instance/i/icon-network.png', 'net3');
        var vm = node(350, 150, 'https://console.ustack.com/static/modules/instance/i/images/single-icon/image_opensuse.png', 'vm');
        var data = node(300, 250, 'https://console.ustack.com/static/modules/instance/i/images/single-icon/image_windows.png', 'data');
        var root = node(400, 250, 'https://console.ustack.com/static/modules/instance/i/images/single-icon/image_windows.png', 'root');
        linkNode(net1,vm,true);
        linkNode(net2,vm,true);
        linkNode(net3,vm,true);
        newFlexionalLink(data,vm,"volume","vertical",2);
        newFlexionalLink(root,vm,"volume","vertical",2);


        stage.add(scene);
    });

</script>

</html>